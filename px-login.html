<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-ajax/iron-ajax.html"/>

<!--
Element providing a login/logout button that integrates nicely with Cloud Foundry's UAA.

##### Usage

    <px-login></px-login>

@element px-login
@blurb Element providing a login/logout button.
@homepage index.html
@demo demo.html
-->
<dom-module id="px-login">
    <link rel="import" type="css" href="css/px-login.css"/>
    <template>
        <button on-click="login" hidden$="{{userInfo.user_name}}">Sign In</button>
        <button on-click="logout" hidden$="{{!userInfo.user_name}}">Log Out</button>
        <div style="color:white" hidden$="{{!userInfo.user_name}}">{{userInfo.user_name}}</div>
        <iron-ajax
            auto
            url="/userinfo"
            handle-as="json"
            last-response="{{userInfo}}"></iron-ajax>
    </template>
</dom-module>

<script>
    Polymer({

        is: 'px-login',
        
        login: function(event, detail, sender) {
            window.location = "/login"
        },

        logout: function(event, detail, sender) {
            window.location = "/logout"
        }

    });
</script>
